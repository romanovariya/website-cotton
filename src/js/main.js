(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.querySelector(".nav"),e=document.querySelector(".menu"),c=document.body,i=document.querySelector(".close");t.addEventListener("click",(()=>{e.classList.add("menu--active"),c.classList.add("noscroll")})),i.addEventListener("click",(()=>{e.classList.remove("menu--active"),c.classList.remove("noscroll")})),document.addEventListener("click",(t=>{t.target.closest(".menu__link")&&(e.classList.remove("menu--active"),c.classList.remove("noscroll"))}))})(),document.querySelector(".questions")&&document.addEventListener("click",(t=>{const e=t.target;e.closest(".question__icon")&&e.closest(".question").classList.toggle("question--active")})),(()=>{if(document.querySelector(".slider"))if(document.querySelector(".slider__control")){const t=document.querySelector(".slider__arrow--left"),e=document.querySelector(".slider__arrow--right"),c=document.querySelectorAll(".slider__item");t.addEventListener("click",(()=>{c.forEach((t=>{t.classList.toggle("slider__item--active")}))})),e.addEventListener("click",(()=>{c.forEach((t=>{t.classList.toggle("slider__item--active")}))}));const i=document.querySelector(".product"),n=document.querySelectorAll(".slider__item")[0],s=document.querySelectorAll(".slider__item")[1],r=document.querySelectorAll(".colors__item"),o=document.querySelectorAll(".sizes__item");(()=>{const t=JSON.parse(window.localStorage.getItem("openedItem"));n.innerHTML=`<img src="images/${t.item}/${t.item}-${t.color}-front.png" alt="" class="slider__img" />`,s.innerHTML=`<img src="images/${t.item}/${t.item}-${t.color}-back.png" alt="" class="slider__img" />`,document.querySelector(`.colors__item--${t.color}`).classList.add("colors__item--active")})(),i.addEventListener("click",(t=>{const e=t.target;if(e.closest(".colors__item")){const t=e.id,c=e.closest(".card").id;n.innerHTML=`<img src="images/${c}/${c}-${t}-front.png" alt="" class="slider__img" />`,s.innerHTML=`<img src="images/${c}/${c}-${t}-back.png" alt="" class="slider__img" />`,r.forEach((t=>{t.classList.remove("colors__item--active")})),e.classList.add("colors__item--active");const i={item:c,color:t};window.localStorage.setItem("openedItem",JSON.stringify(i))}else e.closest(".sizes__item")&&(o.forEach((t=>{t.classList.remove("sizes__item--active")})),e.closest(".sizes__item").classList.add("sizes__item--active"))}))}else{const t=document.querySelector(".slider__item"),e=document.querySelector(".product"),c=document.querySelectorAll(".colors__item"),i=document.querySelectorAll(".material__item"),n=document.querySelectorAll(".clasp__item");(()=>{const e=JSON.parse(window.localStorage.getItem("openedItem"));t.innerHTML=`<img src="images/${e.item}/${e.item}-${e.color}.png" alt="" class="slider__img" />`,document.querySelector(`.colors__item--${e.color}`).classList.add("colors__item--active")})(),e.addEventListener("click",(e=>{const s=e.target;if(s.closest(".colors__item")){const e=s.id,i=s.closest(".card").id;t.innerHTML=`<img src="images/${i}/${i}-${e}.png" alt="" class="slider__img" />`,c.forEach((t=>{t.classList.remove("colors__item--active")})),s.classList.add("colors__item--active");const n={item:i,color:e};window.localStorage.setItem("openedItem",JSON.stringify(n))}else s.closest(".material__item")?(i.forEach((t=>{t.classList.remove("material__item--active")})),s.closest(".material__item").classList.add("material__item--active")):s.closest(".clasp__item")&&(n.forEach((t=>{t.classList.remove("clasp__item--active")})),s.closest(".clasp__item").classList.add("clasp__item--active"))}))}})(),(()=>{const t=document.querySelector("#tshirt-grid")||document.querySelector("#polo-grid")||document.querySelector("#cap-grid")||document.querySelector("#wtshirt-grid")||document.querySelector("#hoodie-grid");let e={item:"",color:""};t&&document.querySelector(".main").addEventListener("click",(t=>{let c=t.target;if(c.closest(".item")){c=c.closest(".item");const t=c.dataset.item,i=c.dataset.color;e.item=t,e.color=i,window.localStorage.setItem("openedItem",JSON.stringify(e))}}))})(),(()=>{const t=document.querySelector(".cart__block");let e=JSON.parse(localStorage.getItem("cart"))||{};const c=document.querySelector(".cart__sum"),i=document.querySelector(".js-cart-wrapper"),n=(c,i)=>{const n=t.querySelector(`[data-product-id="${c}"]`).querySelector(".cart-item__quantity");e[c].amount=i,n.textContent=i,r()},s=()=>{localStorage.setItem("cart",JSON.stringify(e))},r=()=>{const t=(()=>{const t=Object.keys(e).reduce(((t,c)=>{const{amount:i}=e[c];return t+parseInt(i)}),0);return c&&(c.textContent=t),t})();s(),i&&(0==t?i.classList.add("is-empty"):i.classList.remove("is-empty"))},o=(t,e)=>{const c=document.querySelector(`.${t}`);c.classList.add(`${t}--active`),setTimeout((()=>{c.classList.remove(`${t}--active`)}),e)};document.querySelector(".card")&&document.querySelector(".product__button").addEventListener("click",(t=>{t.preventDefault(),(t=>{const{id:c}=t;e[c]=t,s(),r()})((t=>{const e=t.querySelector(".product__name").getAttribute("data-product-name");if("Бейсболка"===e){const c=t.querySelector(".colors__item--active"),i=t.querySelector(".material__item--active"),n=t.querySelector(".clasp__item--active"),s=c.getAttribute("data-product-color"),r=i.getAttribute("data-product-material"),o=n.getAttribute("data-product-clasp");return{name:e,color:s,material:r,clasp:o,amount:t.querySelector(".amount__quantity").textContent,id:`${e}-${s}-${r}-${o}`}}if("Козырек на липучке"===e){const c=t.querySelector(".colors__item--active"),i=(t.querySelector(".sizes__item--active"),c.getAttribute("data-product-color"));return{name:e,color:i,amount:t.querySelector(".amount__quantity").textContent,id:`${e}-${i}`}}{const c=t.querySelector(".colors__item--active"),i=t.querySelector(".sizes__item--active"),n=c.getAttribute("data-product-color"),s=i.getAttribute("data-product-size");return{name:e,color:n,size:s,amount:t.querySelector(".amount__quantity").textContent,id:`${e}-${n}-${s}`}}})(t.target.closest(".product"))),o("notification",2e3)})),t&&(Object.keys(e).forEach((c=>(e=>{const c=document.createElement("div");let i="";i="Бейсболка"===e.name?`\n                <img src="images/delete.png" alt="удалить" class="cart-item__delete">\n                <div class="cart-item__left">\n                <h3 class="cart-item__title">${e.name}</h3>\n                <div class="cart-item__color">\n                    Цвет: ${e.color}\n                </div>\n                <div class="cart-item__size">Материал: ${e.material}</div>\n                <div class="cart-item__size">Застежка: ${e.clasp}</div>\n\n                </div>\n                <div class="cart-item__right">\n                <div class="cart-item__controls">\n                    <button class="cart-item__btn cart-item__btn--minus" type="button">-</button>\n                    <div class="cart-item__quantity">${e.amount}</div>\n                    <button class="cart-item__btn cart-item__btn--plus" type="button">+</button>\n                </div>\n                </div>\n                <input type="hidden" name="${e.id}-Товар" value="${e.name}" />\n                <input type="hidden" name="${e.id}-Количество" value="${e.amount}" />\n                <input type="hidden" name="${e.id}-Материал" value="${e.material}" />\n                <input type="hidden" name="${e.id}-Застежка" value="${e.clasp}" />\n                <input type="hidden" name="${e.id}-Цвет" value="${e.color}" />\n            `:"Козырек на липучке"===e.name?`\n                <img src="images/delete.png" alt="удалить" class="cart-item__delete">\n                <div class="cart-item__left">\n                <h3 class="cart-item__title">${e.name}</h3>\n                <div class="cart-item__color">\n                    Цвет: ${e.color}\n                </div>\n                </div>\n                <div class="cart-item__right">\n                <div class="cart-item__controls">\n                    <button class="cart-item__btn cart-item__btn--minus" type="button">-</button>\n                    <div class="cart-item__quantity">${e.amount}</div>\n                    <button class="cart-item__btn cart-item__btn--plus" type="button">+</button>\n                </div>\n                </div>\n                <input type="hidden" name="${e.id}-Товар" value="${e.name}" />\n                <input type="hidden" name="${e.id}-Количество" value="${e.amount}" />\n                <input type="hidden" name="${e.id}-Цвет" value="${e.color}" />\n            `:`\n                <img src="images/delete.png" alt="удалить" class="cart-item__delete">\n                <div class="cart-item__left">\n                <h3 class="cart-item__title">${e.name}</h3>\n                <div class="cart-item__color">\n                    Цвет: ${e.color}\n                </div>\n                <div class="cart-item__size">Размер: ${e.size}</div>\n                </div>\n                <div class="cart-item__right">\n                <div class="cart-item__controls">\n                    <button class="cart-item__btn cart-item__btn--minus" type="button">-</button>\n                    <div class="cart-item__quantity">${e.amount}</div>\n                    <button class="cart-item__btn cart-item__btn--plus" type="button">+</button>\n                </div>\n                </div>\n                <input type="hidden" name="${e.id}-Товар" value="${e.name}" />\n                <input type="hidden" name="${e.id}-Количество" value="${e.amount}" />\n                <input type="hidden" name="${e.id}-Размер" value="${e.size}" />\n                <input type="hidden" name="${e.id}-Цвет" value="${e.color}" />\n            `,c.innerHTML=i,c.classList.add("cart__item","cart-item"),c.setAttribute("data-product-id",e.id),t.appendChild(c)})(e[c]))),r());const a=document.querySelector(".cart"),l=document.querySelector(".amount");a&&(a.addEventListener("click",(c=>{const i=c.target;if(i.closest(".cart-item__btn")){const t=i.closest(".cart-item__controls"),c=t.querySelector(".cart-item__btn--plus"),s=t.querySelector(".cart-item__btn--minus"),r=i.closest(".cart-item").getAttribute("data-product-id");i===c?(t=>{const c=parseInt(e[t].amount)+1;n(t,c)})(r):i===s&&(t=>{const c=parseInt(e[t].amount)-1;c>=1&&n(t,c)})(r)}else i.closest(".cart-item__delete")&&(c=>{const i=t.querySelector(`[data-product-id="${c}"]`);t.removeChild(i),delete e[c],r()})(i.closest(".cart-item").getAttribute("data-product-id"))})),document.querySelector(".cart__form").addEventListener("submit",(t=>{t.preventDefault();let c=t.currentTarget,i=new FormData,n=c.querySelector('[name="Имя"]').value,a=c.querySelector('[name="Почта"]').value;i.append("Товары",JSON.stringify(e)),i.append("Имя",n),i.append("Почта",a);let l=new XMLHttpRequest;l.onreadystatechange=function(){4===l.readyState&&200===l.status&&console.log("Запрос отправлен")},l.open("POST","php/send.php",!0),l.send(i),o("success",5e3),e={},s(),r(),c.reset()}))),l&&l.addEventListener("click",(t=>{const e=t.target;if(e.closest(".amount__btn")){const t=e.closest(".amount"),c=t.querySelector(".amount__btn--plus"),i=t.querySelector(".amount__btn--minus");let n=t.querySelector(".amount__quantity"),s=parseInt(n.innerHTML);e===c?(s++,n.innerHTML=`${s}`):e===i&&(s--,s<0&&(s=0),n.innerHTML=`${s}`)}}))})()}))})();